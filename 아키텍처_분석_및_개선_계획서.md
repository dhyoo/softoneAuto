# SoftOne Auto Manager - ì•„í‚¤í…ì²˜ ë¶„ì„ ë° ê°œì„  ê³„íšì„œ

## [1] ì „ì²´ êµ¬ì¡° ë° ì˜ì¡´ì„± ë¶„ì„

### 1.1 íŒ¨í‚¤ì§€ êµ¬ì¡° ìš”ì•½

```
com.softone.auto/
â”œâ”€â”€ model/              # ë„ë©”ì¸ ëª¨ë¸ (7ê°œ ì—”í‹°í‹°)
â”‚   â”œâ”€â”€ Company.java
â”‚   â”œâ”€â”€ Developer.java
â”‚   â”œâ”€â”€ Attendance.java
â”‚   â”œâ”€â”€ WeeklyReport.java
â”‚   â”œâ”€â”€ Issue.java
â”‚   â”œâ”€â”€ CustomerCommunication.java
â”‚   â””â”€â”€ CommonCode.java
â”‚
â”œâ”€â”€ repository/         # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
â”‚   â”œâ”€â”€ [Deprecated]    # JSON ê¸°ë°˜ (ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ)
â”‚   â”‚   â”œâ”€â”€ CompanyRepository.java
â”‚   â”‚   â”œâ”€â”€ DeveloperRepository.java
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ sqlite/         # SQLite ê¸°ë°˜ (í˜„ì¬ ì‚¬ìš©)
â”‚       â”œâ”€â”€ CompanySqliteRepository.java
â”‚       â”œâ”€â”€ DeveloperSqliteRepository.java
â”‚       â”œâ”€â”€ SqliteConnectionPool.java
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ service/            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ (7ê°œ ì„œë¹„ìŠ¤)
â”‚   â”œâ”€â”€ CompanyService.java
â”‚   â”œâ”€â”€ DeveloperService.java
â”‚   â”œâ”€â”€ AttendanceService.java
â”‚   â”œâ”€â”€ WeeklyReportService.java
â”‚   â”œâ”€â”€ IssueService.java
â”‚   â”œâ”€â”€ CustomerCommunicationService.java
â”‚   â””â”€â”€ CommonCodeService.java
â”‚
â”œâ”€â”€ ui/                 # í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ (Swing)
â”‚   â”œâ”€â”€ MainFrame.java
â”‚   â”œâ”€â”€ DashboardPanel.java
â”‚   â”œâ”€â”€ DeveloperPanel.java
â”‚   â”œâ”€â”€ AttendancePanel.java
â”‚   â”œâ”€â”€ WeeklyReportPanel.java
â”‚   â”œâ”€â”€ CompanyPanel.java
â”‚   â”œâ”€â”€ IssuePanel.java
â”‚   â”œâ”€â”€ CustomerCommunicationPanel.java
â”‚   â”œâ”€â”€ SystemSettingsPanel.java
â”‚   â””â”€â”€ [ìœ í‹¸ë¦¬í‹°]
â”‚       â”œâ”€â”€ ModernDesign.java
â”‚       â”œâ”€â”€ UIUtils.java
â”‚       â””â”€â”€ OptimizedTableRenderer.java
â”‚
â””â”€â”€ util/               # ê³µí†µ ìœ í‹¸ë¦¬í‹° (20+ í´ë˜ìŠ¤)
    â”œâ”€â”€ [ì„¤ì • ê´€ë¦¬]
    â”‚   â”œâ”€â”€ AppConfig.java
    â”‚   â”œâ”€â”€ AppContext.java
    â”‚   â””â”€â”€ ApplicationMode.java
    â”œâ”€â”€ [ë³´ì•ˆ]
    â”‚   â”œâ”€â”€ SecureConfigManager.java
    â”‚   â”œâ”€â”€ KeyStoreManager.java
    â”‚   â”œâ”€â”€ PathSecurityValidator.java
    â”‚   â”œâ”€â”€ CommandSecurityValidator.java
    â”‚   â””â”€â”€ InputValidator.java
    â”œâ”€â”€ [ë°ì´í„° ì²˜ë¦¬]
    â”‚   â”œâ”€â”€ AsyncDataLoader.java
    â”‚   â”œâ”€â”€ DatabaseEncryptionUtil.java
    â”‚   â””â”€â”€ JsonToSqliteMigrator.java
    â””â”€â”€ [ë¦¬í¬íŠ¸ ìƒì„±]
        â”œâ”€â”€ ExcelReportGenerator.java
        â””â”€â”€ PdfReportGenerator.java
```

### 1.2 ì•„í‚¤í…ì²˜ í‰ê°€

#### âœ… **ì˜ êµ¬í˜„ëœ ë¶€ë¶„**

1. **ê³„ì¸µ ë¶„ë¦¬**: Model â†’ Repository â†’ Service â†’ UI êµ¬ì¡°ê°€ ëª…í™•
2. **SQLite ì „í™˜**: JSONì—ì„œ SQLiteë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ
3. **ë³´ì•ˆ ê°•í™”**: PathSecurityValidator, InputValidator ë“± ë³´ì•ˆ ìœ í‹¸ë¦¬í‹° êµ¬í˜„
4. **ë¹„ë™ê¸° ì²˜ë¦¬**: AsyncDataLoaderë¡œ ì¼ë¶€ UI ë¸”ë¡œí‚¹ ë°©ì§€

#### âš ï¸ **ê°œì„  í•„ìš” ë¶€ë¶„**

1. **Repository ì¤‘ë³µ**: 
   - `@Deprecated` Repositoryë“¤ì´ ì•„ì§ ì¡´ì¬ (JSON ê¸°ë°˜)
   - SQLite Repositoryì™€ ì¤‘ë³µ êµ¬ì¡°
   - **í•´ê²°**: Deprecated Repository ì™„ì „ ì œê±° ë˜ëŠ” Facade íŒ¨í„´ìœ¼ë¡œ í†µí•©

2. **ê²°í•©ë„ ë¬¸ì œ**:
   - `DashboardPanel`ì´ 4ê°œ Serviceë¥¼ ì§ì ‘ ìƒì„± (`new DeveloperService()`)
   - UIê°€ Service êµ¬í˜„ì— ì§ì ‘ ì˜ì¡´
   - **í•´ê²°**: ì˜ì¡´ì„± ì£¼ì…(DI) ë˜ëŠ” Service Locator íŒ¨í„´ ë„ì…

3. **ìˆœí™˜ ì°¸ì¡° ê°€ëŠ¥ì„±**:
   - `AppContext` â†” `AppConfig` ê°„ ìƒí˜¸ ì°¸ì¡° ê°€ëŠ¥ì„±
   - Repository ê°„ ê°„ì ‘ ì°¸ì¡° (Foreign Key ê²€ì¦ ì‹œ)
   - **í•´ê²°**: ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹  ë˜ëŠ” Observer íŒ¨í„´

4. **Util í´ë˜ìŠ¤ ê³¼ë‹¤**:
   - 20ê°œ ì´ìƒì˜ Util í´ë˜ìŠ¤ê°€ í‰ë©´ êµ¬ì¡°
   - ì±…ì„ ë¶„ë¦¬ ë¶€ì¡±
   - **í•´ê²°**: íŒ¨í‚¤ì§€ ì¬êµ¬ì„± (util.security, util.data, util.report ë“±)

### 1.3 ì˜ì¡´ì„± ë¶„ì„

#### âœ… **ìµœì‹  ë²„ì „ ì‚¬ìš© ì¤‘**
- Apache POI: 5.3.0 âœ…
- Gson: 2.11.0 âœ…
- SQLite JDBC: 3.46.1.0 âœ…
- SLF4J/Logback: 2.0.13 / 1.5.8 âœ…
- JUnit: 5.11.0 âœ…

#### âš ï¸ **ê°œì„  ê¶Œì¥ ì‚¬í•­**

1. **iText ë²„ì „**: 
   - í˜„ì¬: 5.5.13.3 (2017ë…„)
   - ê¶Œì¥: iText 7.x (ìµœì‹  ë²„ì „, ë¼ì´ì„ ìŠ¤ ë³€ê²½ ì£¼ì˜)
   - ë˜ëŠ”: Apache PDFBoxë¡œ ì „í™˜ ê²€í† 

2. **Gson ì œê±° ê³„íš**:
   - SQLite ì „í™˜ ì™„ë£Œ í›„ Gson ì˜ì¡´ì„± ì œê±°
   - ë§ˆì´ê·¸ë ˆì´ì…˜ ìœ í‹¸ë¦¬í‹°ë§Œ ë‚¨ê¸°ê³  ë‚˜ë¨¸ì§€ ì œê±°

3. **ì¶”ê°€ ì˜ì¡´ì„± ê²€í† **:
   - SQLCipher (DB ì•”í˜¸í™”): ì„ íƒì 
   - HikariCP (Connection Pool): SQLiteëŠ” ë‹¨ì¼ íŒŒì¼ì´ë¯€ë¡œ ë¶ˆí•„ìš”

---

## [2] JSON ê¸°ë°˜ ì €ì¥ì†Œì˜ ì„±ëŠ¥/êµ¬ì¡° ê°œì„ 

### 2.1 í˜„ì¬ ìƒíƒœ

#### âœ… **ì´ë¯¸ ì™„ë£Œëœ ì‘ì—…**
- SQLite ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ
- `SqliteConnectionPool` êµ¬í˜„
- ì¸ë±ìŠ¤ ìµœì í™” ì™„ë£Œ

#### âš ï¸ **ë‚¨ì€ ì •ë¦¬ ì‘ì—…**

1. **Deprecated Repository ì œê±°**:
   - `CompanyRepository`, `DeveloperRepository`, `AttendanceRepository` ë“±
   - JSON ê´€ë ¨ Adapter í´ë˜ìŠ¤ (`LocalDateAdapter`, `LocalDateTimeAdapter`, `LocalTimeAdapter`)
   - `JsonToSqliteMigrator`ëŠ” ìœ ì§€ (ì¼íšŒì„± ë§ˆì´ê·¸ë ˆì´ì…˜ìš©)

2. **Gson ì‚¬ìš© ì •ë¦¬**:
   - í˜„ì¬: `AppSettings.java`, `JsonToSqliteMigrator.java`ì—ì„œë§Œ ì‚¬ìš©
   - `AppSettings`ë„ SQLiteë¡œ ì „í™˜ ê²€í† 

### 2.2 SQLite êµ¬ì¡° í‰ê°€

#### âœ… **ì˜ ì„¤ê³„ëœ ë¶€ë¶„**
- Foreign Key ì œì•½ì¡°ê±´ ì ìš©
- ì¸ë±ìŠ¤ ìµœì í™” (30+ ì¸ë±ìŠ¤)
- WAL ëª¨ë“œ í™œì„±í™” (ë™ì‹œì„± í–¥ìƒ)

#### ğŸ”§ **ì¶”ê°€ ê°œì„  ì œì•ˆ**

1. **Connection Pool ìµœì í™”**:
   - í˜„ì¬: `SqliteConnectionPool` êµ¬í˜„ë¨
   - í•˜ì§€ë§Œ: ëª¨ë“  Repositoryê°€ `SqliteConnectionManager` ì‚¬ìš© ì¤‘
   - **ì¡°ì¹˜**: ëª¨ë“  Repositoryë¥¼ Connection Poolë¡œ ì „í™˜

2. **ìºì‹± ì „ëµ**:
   - `CommonCode` ë°ì´í„°ëŠ” ë³€ê²½ ë¹ˆë„ê°€ ë‚®ìœ¼ë¯€ë¡œ ë©”ëª¨ë¦¬ ìºì‹±
   - `Company` ëª©ë¡ë„ ìºì‹± ê³ ë ¤

---

## [3] Swing UI ì‘ë‹µì„± & ìŠ¤ë ˆë”© êµ¬ì¡°

### 3.1 í˜„ì¬ ìƒíƒœ ë¶„ì„

#### âœ… **ì´ë¯¸ ë¹„ë™ê¸° ì²˜ë¦¬ëœ ë¶€ë¶„**
- `MainFrame.initializeSampleData()` - SwingWorker ì‚¬ìš©
- `AttendancePanel.loadAttendances()` - AsyncDataLoader ì‚¬ìš©
- `DeveloperPanel.loadDevelopers()` - AsyncDataLoader ì‚¬ìš©

#### âš ï¸ **ì—¬ì „íˆ ë™ê¸° ì²˜ë¦¬ë˜ëŠ” ë¶€ë¶„**

1. **Excel/PDF ìƒì„±**:
   ```java
   // WeeklyReportPanel.java:1128
   private void generateExcel() {
       // EDTì—ì„œ ì§ì ‘ ì‹¤í–‰
       String fileName = ExcelReportGenerator.generateWeeklyReport(currentReport);
   }
   ```
   - **ë¬¸ì œ**: ëŒ€ìš©ëŸ‰ Excel ìƒì„± ì‹œ UI ë©ˆì¶¤
   - **í•´ê²°**: SwingWorkerë¡œ ë¹„ë™ê¸° ì²˜ë¦¬

2. **ë°ì´í„° ì €ì¥**:
   ```java
   // WeeklyReportPanel.java:1050
   private void saveOrUpdateReport() {
       // EDTì—ì„œ ì§ì ‘ ì‹¤í–‰
       reportService.saveReport(currentReport);
   }
   ```
   - **ë¬¸ì œ**: DB ì €ì¥ ì‹œ UI ë¸”ë¡œí‚¹ ê°€ëŠ¥
   - **í•´ê²°**: ë¹„ë™ê¸° ì²˜ë¦¬ + ì§„í–‰ë¥  í‘œì‹œ

3. **ëŒ€ëŸ‰ ë°ì´í„° ë¡œë”©**:
   - `WeeklyReportPanel.loadReports()` - ì•„ì§ ë™ê¸° ì²˜ë¦¬
   - **í•´ê²°**: AsyncDataLoader ì ìš©

### 3.2 ìŠ¤ë ˆë“œ ì•ˆì „ì„±

#### âœ… **ê°œì„ ëœ ë¶€ë¶„**
- `WeeklyReportPanel.cachedReports` â†’ `CopyOnWriteArrayList` ì‚¬ìš©
- `synchronized` ë¸”ë¡ìœ¼ë¡œ ë™ê¸°í™”

#### âš ï¸ **ì¶”ê°€ ê²€í†  í•„ìš”**
- `AppContext` ì‹±ê¸€í†¤ì˜ ìŠ¤ë ˆë“œ ì•ˆì „ì„±
- `AppConfig` ì„¤ì • ë³€ê²½ ì‹œ ë™ì‹œì„± ë¬¸ì œ

---

## [4] Excel / PDF ìƒì„± ì„±ëŠ¥ ë° ë©”ëª¨ë¦¬ ê°œì„ 

### 4.1 Apache POI ë¶„ì„

#### âš ï¸ **í˜„ì¬ ë¬¸ì œì **

```java
// ExcelReportGenerator.java:36
Workbook workbook = new XSSFWorkbook();  // âŒ ë©”ëª¨ë¦¬ ì „ì²´ ë¡œë“œ
```

**ë¬¸ì œ**:
- `XSSFWorkbook`: ì „ì²´ ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ë¡œë“œ
- ëŒ€ëŸ‰ ë°ì´í„° ì‹œ OOM ë°œìƒ ê°€ëŠ¥
- ìŠ¤íƒ€ì¼ ê°ì²´ë¥¼ ë§¤ë²ˆ ìƒì„± (ìºì‹± ì—†ìŒ)

#### âœ… **ê°œì„  ë°©ì•ˆ**

1. **SXSSFWorkbook ì „í™˜**:
   ```java
   // ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ ë³€ê²½
   Workbook workbook = new SXSSFWorkbook(100); // 100í–‰ì”© ë©”ëª¨ë¦¬ì— ìœ ì§€
   ```

2. **ìŠ¤íƒ€ì¼ ìºì‹±**:
   ```java
   public class ExcelStyleCache {
       private static final Map<String, CellStyle> styleCache = new ConcurrentHashMap<>();
       
       public static CellStyle getTitleStyle(Workbook workbook) {
           return styleCache.computeIfAbsent("title", 
               k -> createTitleStyle(workbook));
       }
   }
   ```

3. **ë¹„ë™ê¸° ìƒì„±**:
   ```java
   private void generateExcel() {
       SwingWorker<String, Integer> worker = new SwingWorker<String, Integer>() {
           @Override
           protected String doInBackground() throws Exception {
               return ExcelReportGenerator.generateWeeklyReport(currentReport);
           }
           // ...
       };
       worker.execute();
   }
   ```

### 4.2 iText PDF ë¶„ì„

#### âš ï¸ **ê°œì„  í•„ìš” ì‚¬í•­**

1. **í°íŠ¸ ë¡œë”© ìµœì í™”**:
   - í˜„ì¬: ë§¤ë²ˆ í°íŠ¸ ë¡œë“œ ê°€ëŠ¥ì„±
   - ê°œì„ : í°íŠ¸ ìºì‹±

2. **ì´ë¯¸ì§€ ì²˜ë¦¬**:
   - ëŒ€ìš©ëŸ‰ ì´ë¯¸ì§€ ìŠ¤íŠ¸ë¦¬ë°
   - ì´ë¯¸ì§€ ìºì‹±

---

## [5] ë³´ì•ˆ ì·¨ì•½ì  ì§„ë‹¨ ë° ê°•í™”

### 5.1 íŒŒì¼ ê²½ë¡œ ë° ì…ë ¥ ê²€ì¦

#### âœ… **ì´ë¯¸ êµ¬í˜„ë¨**
- `PathSecurityValidator` - Path Traversal ë°©ì§€
- `InputValidator` - ì…ë ¥ê°’ ê²€ì¦
- `CommandSecurityValidator` - OS Command Injection ë°©ì§€

#### ğŸ”§ **ì¶”ê°€ ê°œì„ **

1. **í—ˆìš© ë””ë ‰í† ë¦¬ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸**:
   ```java
   public class SafePathBuilder {
       private static final Set<String> ALLOWED_DIRS = Set.of(
           "data", "reports", "templates", "logs"
       );
       
       public static Path buildSafePath(String... parts) {
           // í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ê²€ì¦
       }
   }
   ```

### 5.2 ê°œì¸ì •ë³´ ë³´í˜¸

#### âš ï¸ **í˜„ì¬ ë¬¸ì œì **
- ë¡œê·¸ì— ê°œì¸ì •ë³´ í‰ë¬¸ ì¶œë ¥
- ì „í™”ë²ˆí˜¸, ì´ë©”ì¼, ì´ë¦„ì´ ê·¸ëŒ€ë¡œ ë…¸ì¶œ

#### âœ… **ê°œì„  ë°©ì•ˆ**

1. **ë§ˆìŠ¤í‚¹ ìœ í‹¸ë¦¬í‹°**:
   ```java
   public class PrivacyMaskingUtil {
       public static String maskPhone(String phone) {
           // 010-1234-5678 â†’ 010-****-5678
       }
       
       public static String maskEmail(String email) {
           // user@example.com â†’ u***@e***.com
       }
       
       public static String maskName(String name) {
           // í™ê¸¸ë™ â†’ í™*ë™
       }
   }
   ```

2. **ë¡œê·¸ ì ìš© ìœ„ì¹˜**:
   - `DeveloperService.getAllDevelopers()` - ë¡œê·¸ ì¶œë ¥ ì‹œ ë§ˆìŠ¤í‚¹
   - `AttendanceService` - ê°œë°œì ì •ë³´ ë¡œê·¸ ì‹œ ë§ˆìŠ¤í‚¹
   - ëª¨ë“  `System.out.println` â†’ SLF4J ë¡œê±°ë¡œ ì „í™˜ + ë§ˆìŠ¤í‚¹

### 5.3 ì„¤ì •/Config ë³´ì•ˆ

#### âœ… **ì´ë¯¸ êµ¬í˜„ë¨**
- `SecureConfigManager` - ì„¤ì • íŒŒì¼ ì•”í˜¸í™”
- `KeyStoreManager` - í‚¤ ê´€ë¦¬
- ProGuard ì„¤ì • ê°•í™”

#### ğŸ”§ **ì¶”ê°€ ê°œì„ **

1. **í™˜ê²½ë³„ ì„¤ì • ë¶„ë¦¬**:
   ```
   config/
   â”œâ”€â”€ config-dev.properties
   â”œâ”€â”€ config-prod.properties
   â””â”€â”€ config.encrypted (ì•”í˜¸í™”ëœ ì„¤ì •)
   ```

2. **ìŠ¤í¬ë¦½íŠ¸ ë³´ì•ˆ**:
   - `.bat`, `.ps1` íŒŒì¼ì—ì„œ í•˜ë“œì½”ë”©ëœ ê²½ë¡œ ì œê±°
   - í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©

### 5.4 ë¡œê·¸ ë° ê°ì‚¬ ì¶”ì 

#### âœ… **ì´ë¯¸ êµ¬í˜„ë¨**
- Logback ì„¤ì • ì™„ë£Œ
- ERROR ì „ìš© íŒŒì¼
- ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë¡œê·¸

#### ğŸ”§ **ì¶”ê°€ ê°œì„ **

1. **ê°ì‚¬ ë¡œê·¸**:
   ```java
   public class AuditLogger {
       public static void logDataAccess(String userId, String action, String resource) {
           // ê°ì‚¬ ì¶”ì  ë¡œê·¸
       }
   }
   ```

2. **ë¡œê·¸ ë§ˆìŠ¤í‚¹**:
   - ëª¨ë“  ë¡œê·¸ ì¶œë ¥ ì „ ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹ ì ìš©

---

## [6] ìƒìš©í™” ëŒ€ë¹„ ì•„í‚¤í…ì²˜ ê°œì„  ì œì•ˆ

### 6.1 ê¶Œì¥ ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Presentation Layer (UI)            â”‚
â”‚  - MainFrame, *Panel                    â”‚
â”‚  - ë¹„ë™ê¸° ì²˜ë¦¬ (SwingWorker/AsyncLoader)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Application Service Layer          â”‚
â”‚  - *Service (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)             â”‚
â”‚  - íŠ¸ëœì­ì…˜ ê´€ë¦¬                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Domain Layer                       â”‚
â”‚  - Model (Entity)                      â”‚
â”‚  - ë„ë©”ì¸ ê·œì¹™                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Infrastructure Layer               â”‚
â”‚  - Repository (SQLite)                 â”‚
â”‚  - Connection Pool                     â”‚
â”‚  - ì•”í˜¸í™”/ë³´ì•ˆ ìœ í‹¸ë¦¬í‹°                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì‘ì—… ëª©ë¡

| ìš°ì„ ìˆœìœ„ | íŒŒì¼/í´ë˜ìŠ¤ | ì‘ì—… ë‚´ìš© | ì˜ˆìƒ ì‹œê°„ |
|---------|------------|----------|----------|
| **HIGH** | | | |
| H1 | `WeeklyReportPanel.generateExcel()` | SwingWorkerë¡œ ë¹„ë™ê¸° ì²˜ë¦¬ | 2h |
| H2 | `WeeklyReportPanel.generatePdf()` | SwingWorkerë¡œ ë¹„ë™ê¸° ì²˜ë¦¬ | 2h |
| H3 | `ExcelReportGenerator` | XSSFWorkbook â†’ SXSSFWorkbook ì „í™˜ | 3h |
| H4 | `ExcelReportGenerator` | ìŠ¤íƒ€ì¼ ìºì‹± í´ë˜ìŠ¤ ì¶”ê°€ | 2h |
| H5 | `WeeklyReportPanel.loadReports()` | AsyncDataLoader ì ìš© | 1h |
| H6 | `PrivacyMaskingUtil.java` (ì‹ ê·œ) | ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹ ìœ í‹¸ë¦¬í‹° ìƒì„± | 2h |
| H7 | ëª¨ë“  Service í´ë˜ìŠ¤ | ë¡œê·¸ ì¶œë ¥ ì‹œ ë§ˆìŠ¤í‚¹ ì ìš© | 3h |
| H8 | `repository/*.java` (Deprecated) | JSON ê¸°ë°˜ Repository ì™„ì „ ì œê±° | 2h |
| **MEDIUM** | | | |
| M1 | `DashboardPanel` | Service ì˜ì¡´ì„± ì£¼ì… ê°œì„  | 2h |
| M2 | `util/` íŒ¨í‚¤ì§€ | í•˜ìœ„ íŒ¨í‚¤ì§€ë¡œ ì¬êµ¬ì„± | 3h |
| M3 | `AppContext`, `AppConfig` | ìˆœí™˜ ì°¸ì¡° ì œê±° | 2h |
| M4 | ëª¨ë“  Repository | Connection Poolë¡œ ì „í™˜ | 3h |
| M5 | `CommonCodeService` | ë©”ëª¨ë¦¬ ìºì‹± ì¶”ê°€ | 2h |
| M6 | `PdfReportGenerator` | í°íŠ¸/ì´ë¯¸ì§€ ìºì‹± | 2h |
| M7 | `SafePathBuilder.java` (ì‹ ê·œ) | í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ê¸°ë°˜ ê²½ë¡œ ë¹Œë” | 2h |
| M8 | `AuditLogger.java` (ì‹ ê·œ) | ê°ì‚¬ ë¡œê·¸ ìœ í‹¸ë¦¬í‹° | 2h |
| **LOW** | | | |
| L1 | `build.gradle` | iText 7.x ë˜ëŠ” PDFBox ì „í™˜ ê²€í†  | 4h |
| L2 | `AppSettings` | SQLiteë¡œ ì „í™˜ | 3h |
| L3 | `config/` ë””ë ‰í† ë¦¬ | í™˜ê²½ë³„ ì„¤ì • ë¶„ë¦¬ | 2h |
| L4 | `.bat`, `.ps1` ìŠ¤í¬ë¦½íŠ¸ | í•˜ë“œì½”ë”© ì œê±°, í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš© | 1h |
| L5 | SQLCipher ë„ì… | DB íŒŒì¼ ì•”í˜¸í™” (ì„ íƒì ) | 8h |

---

## [7] êµ¬ì²´ì ì¸ ì½”ë“œ ìˆ˜ì • ì˜ˆì‹œ

### 7.1 Excel ìƒì„± ë¹„ë™ê¸° ì²˜ë¦¬

**íŒŒì¼**: `src/main/java/com/softone/auto/ui/WeeklyReportPanel.java`

**í˜„ì¬ ì½”ë“œ**:
```java
private void generateExcel() {
    try {
        if (currentReport == null) {
            saveOrUpdateReport();
        }
        if (currentReport != null) {
            String fileName = ExcelReportGenerator.generateWeeklyReport(currentReport);
            // ...
        }
    } catch (Exception e) {
        // ...
    }
}
```

**ê°œì„  ì½”ë“œ**:
```java
private void generateExcel() {
    if (currentReport == null) {
        saveOrUpdateReport();
        return; // ì €ì¥ í›„ ì¬ì‹œë„
    }
    
    // ì§„í–‰ë¥  í‘œì‹œ
    JProgressBar progressBar = new JProgressBar(0, 100);
    progressBar.setStringPainted(true);
    JDialog progressDialog = createProgressDialog("Excel ìƒì„± ì¤‘...", progressBar);
    progressDialog.setVisible(true);
    
    SwingWorker<String, Integer> worker = new SwingWorker<String, Integer>() {
        @Override
        protected String doInBackground() throws Exception {
            publish(0);
            String fileName = ExcelReportGenerator.generateWeeklyReport(currentReport);
            publish(100);
            return fileName;
        }
        
        @Override
        protected void process(List<Integer> chunks) {
            if (!chunks.isEmpty()) {
                progressBar.setValue(chunks.get(chunks.size() - 1));
            }
        }
        
        @Override
        protected void done() {
            progressDialog.dispose();
            try {
                String fileName = get();
                if (fileName != null) {
                    JOptionPane.showMessageDialog(WeeklyReportPanel.this,
                        "Excel íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤:\n" + new File(fileName).getAbsolutePath(),
                        "ì™„ë£Œ", JOptionPane.INFORMATION_MESSAGE);
                }
            } catch (Exception e) {
                ErrorMessageMapper.logError("Excel ìƒì„±", e);
                JOptionPane.showMessageDialog(WeeklyReportPanel.this,
                    "Excel ìƒì„± ì‹¤íŒ¨: " + ErrorMessageMapper.getUserFriendlyMessage(e),
                    "ì˜¤ë¥˜", JOptionPane.ERROR_MESSAGE);
            }
        }
    };
    
    worker.execute();
}
```

### 7.2 Excel ìŠ¤íƒ€ì¼ ìºì‹±

**ì‹ ê·œ íŒŒì¼**: `src/main/java/com/softone/auto/util/ExcelStyleCache.java`

```java
package com.softone.auto.util;

import org.apache.poi.ss.usermodel.*;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

/**
 * Excel ìŠ¤íƒ€ì¼ ìºì‹± ìœ í‹¸ë¦¬í‹°
 * ë™ì¼í•œ ìŠ¤íƒ€ì¼ ê°ì²´ë¥¼ ì¬ì‚¬ìš©í•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê°ì†Œ
 */
public class ExcelStyleCache {
    
    private static final Map<String, CellStyle> styleCache = new ConcurrentHashMap<>();
    
    /**
     * ì œëª© ìŠ¤íƒ€ì¼ ê°€ì ¸ì˜¤ê¸° (ìºì‹±)
     */
    public static CellStyle getTitleStyle(Workbook workbook) {
        return styleCache.computeIfAbsent("title", k -> createTitleStyle(workbook));
    }
    
    /**
     * í—¤ë” ìŠ¤íƒ€ì¼ ê°€ì ¸ì˜¤ê¸° (ìºì‹±)
     */
    public static CellStyle getHeaderStyle(Workbook workbook) {
        return styleCache.computeIfAbsent("header", k -> createHeaderStyle(workbook));
    }
    
    // ... ê¸°íƒ€ ìŠ¤íƒ€ì¼ ë©”ì„œë“œ
    
    /**
     * ìºì‹œ ì´ˆê¸°í™” (Workbook ë³€ê²½ ì‹œ)
     */
    public static void clearCache() {
        styleCache.clear();
    }
    
    private static CellStyle createTitleStyle(Workbook workbook) {
        CellStyle style = workbook.createCellStyle();
        Font font = workbook.createFont();
        font.setBold(true);
        font.setFontHeightInPoints((short) 16);
        style.setFont(font);
        style.setAlignment(HorizontalAlignment.CENTER);
        style.setVerticalAlignment(VerticalAlignment.CENTER);
        return style;
    }
    
    // ... ê¸°íƒ€ ìŠ¤íƒ€ì¼ ìƒì„± ë©”ì„œë“œ
}
```

### 7.3 ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹ ìœ í‹¸ë¦¬í‹°

**ì‹ ê·œ íŒŒì¼**: `src/main/java/com/softone/auto/util/PrivacyMaskingUtil.java`

```java
package com.softone.auto.util;

import java.util.regex.Pattern;

/**
 * ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹ ìœ í‹¸ë¦¬í‹°
 * ë¡œê·¸ ì¶œë ¥ ì‹œ ê°œì¸ì •ë³´ë¥¼ ë§ˆìŠ¤í‚¹í•˜ì—¬ ë…¸ì¶œ ë°©ì§€
 */
public class PrivacyMaskingUtil {
    
    private static final Pattern PHONE_PATTERN = Pattern.compile("(\\d{2,3})-(\\d{3,4})-(\\d{4})");
    private static final Pattern EMAIL_PATTERN = Pattern.compile("([a-zA-Z0-9._-]+)@([a-zA-Z0-9.-]+)\\.([a-zA-Z]{2,})");
    
    /**
     * ì „í™”ë²ˆí˜¸ ë§ˆìŠ¤í‚¹
     * 010-1234-5678 â†’ 010-****-5678
     */
    public static String maskPhone(String phone) {
        if (phone == null || phone.isEmpty()) {
            return phone;
        }
        return PHONE_PATTERN.matcher(phone).replaceAll("$1-****-$3");
    }
    
    /**
     * ì´ë©”ì¼ ë§ˆìŠ¤í‚¹
     * user@example.com â†’ u***@e***.com
     */
    public static String maskEmail(String email) {
        if (email == null || email.isEmpty()) {
            return email;
        }
        return EMAIL_PATTERN.matcher(email).replaceAll("$1***@$2***.$3");
    }
    
    /**
     * ì´ë¦„ ë§ˆìŠ¤í‚¹ (í•œê¸€)
     * í™ê¸¸ë™ â†’ í™*ë™
     * John â†’ J**n
     */
    public static String maskName(String name) {
        if (name == null || name.isEmpty() || name.length() <= 1) {
            return name;
        }
        
        if (name.length() == 2) {
            return name.charAt(0) + "*";
        }
        
        if (name.length() == 3) {
            return name.charAt(0) + "*" + name.charAt(2);
        }
        
        // 4ì ì´ìƒ
        return name.charAt(0) + "*".repeat(name.length() - 2) + name.charAt(name.length() - 1);
    }
    
    /**
     * ê°œë°œì ì •ë³´ ë§ˆìŠ¤í‚¹ (ë¡œê·¸ìš©)
     */
    public static String maskDeveloperInfo(String info) {
        if (info == null) return null;
        String masked = maskPhone(info);
        masked = maskEmail(masked);
        return masked;
    }
}
```

### 7.4 SXSSFWorkbook ì „í™˜

**íŒŒì¼**: `src/main/java/com/softone/auto/util/ExcelReportGenerator.java`

**ìˆ˜ì • ì‚¬í•­**:
```java
// ë³€ê²½ ì „
Workbook workbook = new XSSFWorkbook();

// ë³€ê²½ í›„
Workbook workbook = new SXSSFWorkbook(100); // 100í–‰ì”© ë©”ëª¨ë¦¬ì— ìœ ì§€

// ë§ˆì§€ë§‰ì— ì„ì‹œ íŒŒì¼ ì •ë¦¬
if (workbook instanceof SXSSFWorkbook) {
    ((SXSSFWorkbook) workbook).dispose(); // ì„ì‹œ íŒŒì¼ ì‚­ì œ
}
```

---

## [8] PR ì„¤ëª…ë¬¸ ì˜ˆì‹œ

### PR Title
```
[Performance] Excel/PDF ìƒì„± ë¹„ë™ê¸° ì²˜ë¦¬ ë° ë©”ëª¨ë¦¬ ìµœì í™”
```

### Description
ì´ PRì€ Excel/PDF ìƒì„± ì„±ëŠ¥ ê°œì„ ê³¼ UI ì‘ë‹µì„± í–¥ìƒì„ ìœ„í•œ ë³€ê²½ì‚¬í•­ì„ í¬í•¨í•©ë‹ˆë‹¤.

#### ì£¼ìš” ë³€ê²½ì‚¬í•­

1. **Excel ìƒì„± ë¹„ë™ê¸° ì²˜ë¦¬**
   - `WeeklyReportPanel.generateExcel()` â†’ SwingWorkerë¡œ ì „í™˜
   - ì§„í–‰ë¥  í‘œì‹œ ì¶”ê°€
   - UI ë¸”ë¡œí‚¹ ë°©ì§€

2. **Excel ë©”ëª¨ë¦¬ ìµœì í™”**
   - `XSSFWorkbook` â†’ `SXSSFWorkbook` ì „í™˜
   - ìŠ¤íƒ€ì¼ ìºì‹± (`ExcelStyleCache` ì¶”ê°€)
   - ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ OOM ë°©ì§€

3. **PDF ìƒì„± ë¹„ë™ê¸° ì²˜ë¦¬**
   - `WeeklyReportPanel.generatePdf()` â†’ SwingWorkerë¡œ ì „í™˜

#### ë³€ê²½ëœ íŒŒì¼
- `src/main/java/com/softone/auto/ui/WeeklyReportPanel.java`
- `src/main/java/com/softone/auto/util/ExcelReportGenerator.java`
- `src/main/java/com/softone/auto/util/ExcelStyleCache.java` (ì‹ ê·œ)

#### í…ŒìŠ¤íŠ¸
- [ ] Excel ìƒì„± ì‹œ UI ì‘ë‹µì„± í™•ì¸
- [ ] ëŒ€ìš©ëŸ‰ ë°ì´í„° Excel ìƒì„± í…ŒìŠ¤íŠ¸
- [ ] PDF ìƒì„± ì‹œ UI ì‘ë‹µì„± í™•ì¸

---

## [9] ë‹¤ìŒ ë‹¨ê³„ ì‹¤í–‰ ê³„íš

### Phase 1: ê¸´ê¸‰ ê°œì„  (1ì£¼)
1. Excel/PDF ë¹„ë™ê¸° ì²˜ë¦¬
2. ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹ ì ìš©
3. Deprecated Repository ì œê±°

### Phase 2: ì„±ëŠ¥ ìµœì í™” (1ì£¼)
1. SXSSFWorkbook ì „í™˜
2. ìŠ¤íƒ€ì¼ ìºì‹±
3. Connection Pool ì „í™˜

### Phase 3: ì•„í‚¤í…ì²˜ ê°œì„  (2ì£¼)
1. Util íŒ¨í‚¤ì§€ ì¬êµ¬ì„±
2. ì˜ì¡´ì„± ì£¼ì… ê°œì„ 
3. í™˜ê²½ë³„ ì„¤ì • ë¶„ë¦¬

---

## ê²°ë¡ 

í˜„ì¬ ì½”ë“œë² ì´ìŠ¤ëŠ” ê¸°ë³¸ì ì¸ ê³„ì¸µ êµ¬ì¡°ì™€ ë³´ì•ˆ ê¸°ëŠ¥ì´ ì˜ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. 
ì£¼ìš” ê°œì„  í¬ì¸íŠ¸ëŠ” **UI ì‘ë‹µì„± í–¥ìƒ**ê³¼ **ë©”ëª¨ë¦¬ ìµœì í™”**ì…ë‹ˆë‹¤.

ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ë‹¨ê³„ì ìœ¼ë¡œ ê°œì„ ì„ ì§„í–‰í•˜ë©´ ìƒìš©í™”ì— ì í•©í•œ ì•ˆì •ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë  ê²ƒì…ë‹ˆë‹¤.

